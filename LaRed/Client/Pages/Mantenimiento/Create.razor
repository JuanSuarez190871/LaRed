@page "/mantenimiento/create"
@using LaRed.Shared.Models
@inject HttpClient Http
@inject NavigationManager Navigation
<h3>Agregar Mantenimiento</h3>



<EditForm Model="@_mantenimiento" OnValidSubmit="Post">
    <div class="form-group">
        <label>Codigo de Activo: </label>
        <InputNumber @bind-Value="_mantenimiento.ActivoID" />
    </div>
    <div class="form-group">
        <label>Fecha de Mantenimiento: </label>
        <InputDate @bind-Value="_mantenimiento.FechaMantenimiento" />
    </div>
    <div class="form-group">
        <label>Descripción</label>
        <InputTextArea @bind-Value="_mantenimiento.DescripcionMantenimiento" />
    </div>
    <div class="form-group">
        <input type="submit" class="btn btn-success" value="Agregar Mantenimiento" />
    </div>
</EditForm>



@code {
    private Mantenimiento _mantenimiento = new();
    
    private async Task Post()
    {
        await Http.PostAsJsonAsync<Mantenimiento>("/api/Mantenimiento/", _mantenimiento);
        Navigation.NavigateTo("/Mantenimiento");
    }

    protected override void OnInitialized()
    {
        _mantenimiento.FechaMantenimiento = DateTime.Now;
    }

}
